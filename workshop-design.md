# AI協働開発フレームワーク ワークショップ設計書

## 全体構成

### コンセプト
- **「説明」ではなく「体験」で学ぶ**
- 各セッションで1-2原則に集中
- Before/After の対比で効果を実感
- 判断支援ツールを実際に使う

### セッション構成（全6回）

| 回 | テーマ | 対象原則 | 所要時間 |
|----|--------|----------|----------|
| 1 | タスク分解の基礎 | S1: 1文1検証 | 90分 |
| 2 | 検証と損切り | H1, H2, P2 | 90分 |
| 3 | AIへの指示設計 | S3, A1-A4 | 90分 |
| 4 | CLAUDE.mdの育て方 | G3, C1-C4 | 90分 |
| 5 | 可逆性と持続可能性 | R1-R3, G1-G2 | 60分 |
| 6 | 総合演習 | 全原則 | 120分 |

---

## Session 1: タスク分解の基礎（S1: 1文1検証）

### 目的
「1文1検証」の判断基準を体得し、タスク分解を自力でできるようになる

### タイムテーブル（90分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-10分 | オープニング：なぜタスク分解が重要か | 講義 |
| 10-25分 | Before/After デモ | デモ |
| 25-45分 | 1文1検証チェッカー体験 | ハンズオン |
| 45-70分 | タスク分解実践 | グループワーク |
| 70-85分 | グループ発表・比較 | 発表 |
| 85-90分 | 振り返り・次回予告 | 講義 |

### Before/After デモ（詳細）

#### Before: 悪い例
```
プロンプト: 「認証機能を実装してください」

Claudeの出力:
- User.ts（エンティティ）
- AuthService.ts（認証ロジック）
- AuthController.ts（API）
- JwtStrategy.ts（JWT検証）
- auth.middleware.ts（ミドルウェア）
- auth.spec.ts（テスト）
→ 6ファイル、500行以上
→ 期待と違う設計、修正に1時間
```

#### After: 良い例
```
プロンプト1: 「Userエンティティの型定義を作成してください」
→ User.ts のみ、50行
→ 期待通り、tsc通過

プロンプト2: 「POST /login エンドポイントを作成してください。
             既存のsrc/api/users.tsを参考にしてください」
→ auth.ts のみ、80行
→ 期待通り、curl で動作確認
```

### ハンズオン演習（題材）

#### 演習1: チェッカー体験
以下のタスク記述をチェッカーにかける：

1. 「Userエンティティを作成してください」
   → 期待: OK

2. 「認証機能を実装して、テストも書いてください」
   → 期待: NG（複数アクション）

3. 「もしエラーが出たら適切にハンドリングしてください」
   → 期待: NG（条件分岐 + 曖昧表現）

4. 「既存のパターンを参考に、いい感じにリファクタしてください」
   → 期待: NG（曖昧表現）

#### 演習2: タスク分解実践
以下の機能要件を「1文1検証」を満たす粒度に分解する：

**題材A: パスワードリセット機能**
```
ユーザーがパスワードを忘れた場合、
メールアドレスを入力してリセットリンクを受け取り、
新しいパスワードを設定できる機能
```

**期待される分解例:**
1. PasswordResetTokenエンティティの型定義を作成する
2. パスワードリセットトークン生成関数を作成する
3. POST /password-reset/request エンドポイントを作成する
4. POST /password-reset/confirm エンドポイントを作成する
5. パスワードリセットのテストを作成する

**題材B: 検索機能**
```
商品を名前、カテゴリ、価格帯で検索できる機能。
結果はページネーションで表示。
```

### グループワーク進行

1. 3-4人のグループに分かれる
2. 題材A または B を選択
3. 15分で分解案を作成
4. 1文1検証チェッカーで各タスクを検証
5. NGが出たら再分解
6. 最終案をホワイトボードに記載

### 評価ポイント
- [ ] 各タスクが「1文で説明できる」か
- [ ] 各タスクに「検証コマンド」が明記されているか
- [ ] 依存関係が整理されているか
- [ ] Type 1/2 の分類がされているか

---

## Session 2: 検証と損切り（H1, H2, P2）

### 目的
- 「設計→実装→検証」の順序を体得する
- 損切りの判断基準を理解し、躊躇なく実行できるようになる

### タイムテーブル（90分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-10分 | オープニング：検証の重要性 | 講義 |
| 10-30分 | 検証コマンド選択デモ | デモ |
| 30-50分 | 「沼にハマる」体験演習 | ハンズオン |
| 50-70分 | 損切り判断ツール体験 | ハンズオン |
| 70-85分 | 損切り後の復帰パターン | 講義 |
| 85-90分 | 振り返り | 講義 |

### 「沼にハマる」体験演習

**目的**: 損切りの必要性を「体感」する

**進行**:
1. 意図的にエラーが出る課題を渡す
2. 15分間、自力で解決を試みる
3. 10分経過時点で「損切り判断ツール」を紹介
4. ツールの判定結果を見て撤退判断

**課題例**:
```typescript
// このコードのエラーを修正してください
// （実際には型定義の循環参照があり、単純な修正では解決しない）

interface User {
  id: string;
  posts: Post[];
}

interface Post {
  id: string;
  author: User;
  comments: Comment[];
}

interface Comment {
  id: string;
  author: User;
  post: Post;
}
```

**振り返りポイント**:
- 「もう少しで解決できそう」という感覚はどこで生まれたか
- 撤退を決めたとき、何が決め手だったか
- 撤退後、どうアプローチを変えたか

---

## Session 3: AIへの指示設計（S3, A1-A4）

### 目的
- 「最小入力 → 検証可能出力」を実践できる
- AI原則（A1-A4）をCLAUDE.mdに反映できる

### タイムテーブル（90分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-15分 | AI原則の解説 | 講義 |
| 15-35分 | 良いプロンプト/悪いプロンプトの比較 | デモ |
| 35-55分 | プロンプト改善演習 | ハンズオン |
| 55-75分 | CLAUDE.mdへの反映実践 | ハンズオン |
| 75-90分 | 発表・振り返り | 発表 |

### プロンプト改善演習

**題材**: 以下の「悪いプロンプト」を改善する

1. **悪い例A**
   ```
   このコードをいい感じにリファクタしてください
   ```
   
   **改善の方向**:
   - 「いい感じ」を具体化
   - スコープを限定
   - 検証方法を明記

2. **悪い例B**
   ```
   ユーザー管理機能を作ってください。
   将来的に拡張できるように汎用的に設計してください。
   ```
   
   **改善の方向**:
   - 「将来的に」を削除（YAGNI違反）
   - 今必要な機能に限定
   - 具体的な成果物を指定

3. **悪い例C**
   ```
   このAPIを修正して、あとテストも追加して、
   ドキュメントも更新しておいてください。
   ```
   
   **改善の方向**:
   - 3つのタスクに分解
   - 各タスクに検証コマンド

---

## Session 4: CLAUDE.mdの育て方（G3, C1-C4）

### 目的
- CLAUDE.mdの役割を理解する
- チームでCLAUDE.mdを育てる方法を学ぶ

### タイムテーブル（90分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-15分 | CLAUDE.mdとは何か | 講義 |
| 15-30分 | Phase別テンプレート解説 | 講義 |
| 30-50分 | 失敗事例の記録演習 | ハンズオン |
| 50-70分 | チームでのCLAUDE.md運用設計 | グループワーク |
| 70-90分 | 発表・ベストプラクティス共有 | 発表 |

### 失敗事例の記録演習

**進行**:
1. Session 2で体験した「沼」を振り返る
2. 以下のフォーマットで記録する

```markdown
## 失敗パターン: [タイトル]

### 状況
- 何をしようとしていたか
- どのような指示を出したか

### 問題
- 何が起きたか
- なぜ問題だったか

### 教訓
- 次回からどうするか
- CLAUDE.mdに追記する内容

### 関連原則
- S1, H2, P2 など
```

---

## Session 5: 可逆性と持続可能性（R1-R3, G1-G2）

### 目的
- 「AIなしでもできる」状態の重要性を理解する
- チームへの展開方法を学ぶ

### タイムテーブル（60分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-15分 | 可逆性の3原則解説 | 講義 |
| 15-30分 | 自己診断：可逆性チェック | 個人ワーク |
| 30-45分 | チーム展開の3フェーズ解説 | 講義 |
| 45-60分 | 自チームの展開計画作成 | グループワーク |

### 可逆性自己診断

以下の質問に回答し、現在の状態を把握する：

**R1: スキルの可逆性**
- [ ] 最後にAIなしでコードを書いたのはいつか？
- [ ] Claudeが生成したコードを説明できるか？
- [ ] 新しい技術を学ぶとき、まず自分で基礎を学んでいるか？

**R2: プロセスの可逆性**
- [ ] CLAUDE.mdがなくても開発を進められるか？
- [ ] チーム全員がAIなしで作業できるか？
- [ ] 緊急時のフォールバック手順があるか？

**R3: 判断の可逆性**
- [ ] AIの提案を却下したことがあるか？
- [ ] 「AIが言ったから」を理由にしていないか？
- [ ] 最終判断の責任を自分で持っているか？

---

## Session 6: 総合演習（全原則）

### 目的
- 全原則を統合して実践できる
- 実際のタスクで判断・実行・振り返りのサイクルを回す

### タイムテーブル（120分）

| 時間 | 内容 | 形式 |
|------|------|------|
| 0-10分 | オープニング・課題説明 | 講義 |
| 10-80分 | 総合演習 | ペアワーク |
| 80-100分 | 振り返り・発表 | 発表 |
| 100-120分 | 全体振り返り・次のステップ | 講義 |

### 総合演習課題

**課題**: 以下の機能を実装する（ペアで取り組む）

```
【課題】お気に入り機能の実装

ユーザーが商品をお気に入りに追加・削除できる機能を実装してください。

技術スタック:
- TypeScript
- Express
- PostgreSQL
- zod

既存ファイル:
- src/entities/User.ts
- src/entities/Product.ts
- src/api/products.ts
```

**進行**:
1. タスク分解（1文1検証チェッカー使用）
2. 実装（検証を挟みながら）
3. 問題発生時は損切り判断ツールを使用
4. CLAUDE.mdに学びを記録

**観察ポイント**（ファシリテーター用）:
- タスク分解前にすぐ実装に入っていないか
- 検証を省略していないか
- 損切りの判断が遅れていないか
- 失敗をCLAUDE.mdに記録しているか

---

## ファシリテーターガイド

### 心理的安全性の確保

- 「失敗」を「学び」として扱う
- 「やらかし」を積極的に共有する文化を作る
- 質問しやすい雰囲気を維持する

### よくある質問への回答

**Q: 全部覚えないといけないのか？**
A: いいえ。まずS1「1文1検証」だけを意識してください。
   他の原則は、必要になったときに参照すれば十分です。

**Q: 原則同士が矛盾することはないのか？**
A: 階層構造で優先順位が決まっています。
   上位（L0）が常に優先されるため、矛盾は発生しません。

**Q: チーム全員が同じレベルでないと使えないのか？**
A: いいえ。習熟度に応じたレベル（L1/L2/L3）があります。
   各自のペースで進めてください。

### 成功指標

| 指標 | 測定方法 | 目標 |
|------|---------|------|
| タスク分解の習慣化 | PR前にチェッカー使用率 | 80%以上 |
| 損切りの実行 | 30分以上のハマり率 | 20%以下 |
| CLAUDE.md更新 | 週あたりの更新回数 | 2回以上 |
| 満足度 | セッション後アンケート | 4.0/5.0以上 |
